function uploadAjaxOnprogressStart(a,c){var d={};DEXTTOP.G_CURREDITOR.xhr_onprogress=new XMLHttpRequest;var b=DEXTTOP.G_CURREDITOR.xhr_onprogress;DEXTTOP.DEXT5.ajax.xhrWithCredentials&&"withCredentials"in b&&(b.withCredentials=!0);b.upload.onprogress=function(a){try{var b=DEXTTOP.DEXT5.util.parseIntOr0(a.loaded/a.total*100),c=document.getElementById("dext_loading");c&&c.childNodes&&(c.childNodes[1].nodeValue=" Uploading... "+b+"%")}catch(d){loading_image_show(!1)}};b.onload=function(){if(b){var a;
200==b.status?(d.response=DEXTTOP.G_CURREDITOR._FRAMEWIN.getXhrResponseData(),a=b.responseText):(d.response=DEXTTOP.G_CURREDITOR._FRAMEWIN.getXhrResponseData(b),a="[FAIL]File Upload Error");b=null;loading_image_show(!1);c(a,d)}};b.onerror=function(){d.response=DEXTTOP.G_CURREDITOR._FRAMEWIN.getXhrResponseData(b);b=null;loading_image_show(!1);c("[FAIL]File Upload Error",d)};var e=new FormData;a.formData&&0<a.formData.length&&a.formData.each(function(a,b){"proxy_url"==a&&(b="0"!=DEXTTOP.G_CURREDITOR._config.security.encryptParam?
DEXTTOP.DEXT5.util.makeEncryptParamFinal(""):"");e.append(a,b)});a.fileObj&&e.append(a.fileID,a.fileObj[0]);b.open("POST",a.handlerUrl,!0);DEXTTOP.DEXT5.util.setAddHttpHeader(b,DEXTTOP.G_CURREDITOR._config.addHttpHeader);b.send(e)}function uploadAjaxOnprogressCancel(){if(DEXTTOP.G_CURREDITOR.xhr_onprogress)try{DEXTTOP.G_CURREDITOR.xhr_onprogress.abort(),DEXTTOP.G_CURREDITOR.xhr_onprogress=null}catch(a){}}
function setDragAndDropEvent(a){a=document.getElementById(a);DEXTTOP.DEXT5.util.addEvent(a,"dragenter",upload_DragEnter);DEXTTOP.DEXT5.util.addEvent(a,"dragover",upload_DragOver);DEXTTOP.DEXT5.util.addEvent(a,"drop",upload_Drop);DEXTTOP.DEXT5.util.addEvent(a,"click",upload_Drop_zone_click);DEXTTOP.DEXT5.util.addEvent(a,"dragleave",upload_DragLeave)}function upload_DragEnter(a){a.stopPropagation();a.preventDefault()}
function upload_DragOver(a){document.getElementById("drop_zone").style.border="solid 1px gray";document.getElementById("drop_zone").style.backgroundColor="#EDEDED";a.stopPropagation();a.preventDefault()}function upload_DragLeave(a){document.getElementById("drop_zone").style.border="dashed 1px gray";document.getElementById("drop_zone").style.backgroundColor="#FFFFFF";a.stopPropagation();a.preventDefault()}
function upload_Drop(a){document.getElementById("drop_zone").style.border="dashed 1px gray";document.getElementById("drop_zone").style.backgroundColor="#FFFFFF";var c=document.getElementById("drop_zone_uploadtype").value;G_dragDropFileObj=a.dataTransfer.files;if(!fileOnchange(G_dragDropFileObj,c)){switch(c){default:document.getElementById("file_text").value=a.dataTransfer.files[0].name,document.getElementById("file_text").setAttribute("value",a.dataTransfer.files[0].name),document.getElementById("file_text_view")&&
(document.getElementById("file_text_view").value=a.dataTransfer.files[0].name,document.getElementById("file_text_view").setAttribute("value",a.dataTransfer.files[0].name))}DEXTTOP.DEXT5.util.cancelEvent(a)}}function upload_Drop_zone_click(){document.getElementById(DEXTTOP.G_CURREDITOR._config.fileFieldID).click()};
